<!-- app/views/books/index.html.erb -->

<h1>Top 10 rated books of all time!</h1>

<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>Date of Publication</th>
      <th>Number of Sales</th>
      <th>Average Score</th>
      <th>Highest Review</th>
      <th>Lowest Review</th>
    </tr>
  </thead>
  <tbody>
    <% @reviews_by_rating.each do |book, highest_review, lowest_review, average_score| %>
      <tr>
        <td><%= book.name %></td>
        <td><%= book.summary %></td>
        <td><%= book.date_of_publication %></td>
        <td><%= book.number_of_sales %></td>
        <td><%= average_score %></td>
        <td>
          <% if highest_review %>
            <%= "#{highest_review.score} stars - #{highest_review.review}" %>
          <% else %>
            N/A
          <% end %>
        </td>
        <td>
          <% if lowest_review %>
            <%= "#{lowest_review.score} stars - #{lowest_review.review}" %>
          <% else %>
            N/A
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to "New book", new_book_path %>

